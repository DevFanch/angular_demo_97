<!-- Import Component Header -->
<app-header class="mb-4"></app-header>

<h1 class="text-3xl font-bold mb-4">{{ title }}</h1>

<div class="container mx-auto">
    <h3 class="text-xl font-bold mb-2">Directives</h3>
    <!-- Diplaying -->
    <!-- Format date with pipe -->
    <p class="text-gray-600 mb-4">Nous sommes le {{ today | date: 'd-M-Y à H:mm' }}</p>
    <!-- Condition -->
    @if (isAdmin) {
        <div class="p-4 bg-green-100 text-green-800 rounded-md mb-4">
            <p>Cool, t'es Admin</p>
        </div>
    }
    <!-- Loop -->
    <ul class="space-y-2 mb-4">
        @for (item of courseList; track $index) {   
            <li class="flex items-center">
                <span class="mr-2">{{ item }}</span>
                <span class="text-gray-500">- {{ $index }}</span>
            </li>
        }
    </ul>

    <!-- Attribute Directive -->
    <img [src]="pathImage" class="mr-4 w-1/4">

    <!-- Event Directive -->
    <div class="flex flex-col items-center mb-4">
        <button (click)="addOne()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Plus 1</button>
        <p class="mb-4">{{ count }}</p>
    </div>

    <!-- Service fetch data -->
    <h3 class="text-xl font-bold mb-2">Service</h3>
    <h4 class="text-xl font-bold mb-2">Fake datas</h4>
    <pre class="bg-gray-100 p-4 rounded-md mb-4">{{ tasks | json }}</pre>
    
    <!-- Displaying Products from DummyJson -->
    <h4 class="text-xl font-bold mb-2">Api datas</h4>
    @if(products) {
    <div class="container mx-auto px-4 py-8">
            <h1 class="text-3xl font-bold mb-6 text-center">Nos Produits</h1>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                @for (product of products; track $index) {
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <img [src]="product.thumbnail" [alt]="product.title" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h2 class="text-xl font-semibold mb-2">{{ product.title }}</h2>
                            <p class="text-gray-600 text-sm mb-2">{{ product.description | slice:0:100 }}...</p>
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-bold text-blue-600">${{ product.price }}</span>
                                <span class="bg-green-100 text-green-800 text-xs font-semibold px-2 py-1 rounded-full">
                                    {{ product.rating | number:'1.1-1' }} ★
                                </span>
                            </div>
                            <button
                                class="mt-4 w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-300">
                                Ajouter au panier
                            </button>
                        </div>
                    </div>
                }
            </div>
        </div>
        }
</div>